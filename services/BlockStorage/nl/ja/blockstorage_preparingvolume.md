{:new_window: target="_blank"}


# {{site.data.keyword.blockstorageshort}} ボリュームの準備 
{: #preparing-block-storage-volume}

最終更新日: 2016 年 7 月 29 日
{: .last-updated}

  ボリュームを作成し、それを仮想サーバーに接続した後、ボリュームをマウントして使用する準備をする必要があります。
  
  **注**: 該当するコマンドは、特定のオペレーティング・システムによって異なります。詳しくは、使用しているオペレーティング・システムの資料を参照してください。以下のステップは、CentOS 仮想サーバーを使用してテストされました。
  
  ボリュームを準備するには、以下のステップに従います。

1. 仮想サーバーにログインします。  

   <pre><code>ssh -i security_key_name.pem ibmcloud@xxx.xx.xx.xx</pre></code>

   **注:** デフォルトのユーザー ID、セキュリティー・キー名、パブリック IP アドレスを見つけるには、仮想サーバーの「概要」タブを表示します。デフォルトのユーザー ID は *ibmcloud* です。SSH を使用した仮想サーバーへのログインについて詳しくは、[Linux 端末から仮想サーバー・インスタンスへのログイン](../../virtualmachines/vm_manage_instances.html#vm_login)を参照してください。 

2. ボリュームが接続されていることを確認します。  

   <pre><code>sudo su -</pre></code>
   
   **注:** 使用しているオペレーティング・システムで *sudo su* コマンドが機能しない場合は、各コマンドの前に *sudo* を使用します。例えば、*sudo fdisk -l* です。
   
   <pre><code>fdisk -l</pre></code>

   ボリューム情報は、情報テキストの下の方にリストされます。例えば、*Disk /dev/vdb: 10.7 GB, 10737418240 bytes* です。

3. ディスクをパーティション化します。

   a. fdisk を始動して、新しいパーティションを作成します。
    
     <pre><code>fdisk /dev/vdb</pre></code>

   b. **n** を入力し、新しいパーティションを作成します。
   
   c. **p** を入力して、1 次パーティションを指定します。
   
   d. 1 つのパーティションを作成するには、**1** を入力します。
   
   e. 特定の要件がなければ、残りのプロンプトに対してデフォルト値を選択し、「Enter」キーを押します。

   f. **w** を入力してパーティションを書き込みます。
   
   g. 新しいディスクの作成を確認します。
   
     <pre><code>fdisk -l</pre></code>

     **注:** 新しいディスク名は、通常、そのディスクが作成されたパーティションの名前に、1 などの増分値が付けられたものです。例えば、*vdb1* です。

4. ボリュームをフォーマットします。 

   ボリュームに情報を保管するには、フォーマットする必要があります。この例では ext4 を使用しますが、サポートしているどのようなファイル・システムも使用できます。

   <pre><code>mkfs -t ext4 /dev/vdb1</pre></code>

    **注:** スーパーブロックとファイル・システム・アカウンティング情報を書き込むステップは、完了までに余分に時間がかかる可能性があります。処理が終了すると、状況として *done* が表示されます。

5. ボリュームをマウントします。 

   a. ボリュームを使用するには、マウントする必要があります。

      <pre><code>mkdir -p /mnt/myvolume</pre></code>
      
      <pre><code>mount /dev/vdb1 /mnt/myvolume</pre></code>

      ここで、*myvolume* は、好みのフォルダー名です。

   b. ボリュームがリストされていて作動可能であることを確認します。

      <pre><code>df -h</pre></code>

6. (オプション) ボリュームを永続的にマウントします。 

   ボリュームを永続的にマウントすることができます。そうすると、リブート後にマウントを繰り返す必要がなくなります。

   a. ボリュームの UUID を見つけます。

      <pre><code>blkid</pre></code>

   b. リストされた UUID をコピーします。

   c. ファイル・システム・テーブル情報を編集します。

      <pre><code>nano /etc/fstab</pre></code>      

   d. 特定の UUID などの以下の行をファイルの一番下に貼り付けて、保存します。
   
      <pre><code>UUID=xxxxxx /mnt/myvolume ext4 defaults  0 2</pre></code>

   e. ボリュームが永続的にマウントされたことをテストするには、仮想サーバーをリブートします。

      <pre><code>reboot</pre></code>

  仮想サーバーが再度実行されたときに、仮想サーバーにログインし、作成した新しいフォルダーにディレクトリーを変更します。例えば、**cd /mnt/myvolume** にナビゲートします。

  これで、ボリュームを使用できるようになりました。
